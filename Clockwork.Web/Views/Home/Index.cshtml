<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://code.jquery.com/jquery-1.11.2.min.js"></script>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootbox.js/4.3.0/bootbox.min.js"></script>
    <script src="https://bootstrap-confirmation.js.org/assets/js/docs.min.js"></script>
    <script src="https://bootstrap-confirmation.js.org/assets/js/script.js"></script>
    <script src="https://bootstrap-confirmation.js.org/node_modules/bootstrap-confirmation2/bootstrap-confirmation.min.js"></script>
    <link rel="shortcut icon" href="favicon.ico">
    <link rel="icon" type="image/gif" href="animated_favicon1.gif">
    <meta name="viewport" content="width=device-width" />
</head>
<style>
    .table_wrapper {
        height: 300px;
        overflow: auto;
        text-align: center;
    }

    /* Popup box BEGIN */
    .hover_bkgr_fricc {
        background: rgba(0,0,0,.4);
        cursor: pointer;
        display: none;
        height: 100%;
        position: fixed;
        text-align: center;
        top: 0;
        width: 100%;
        z-index: 10000;
    }

        .hover_bkgr_fricc .helper {
            display: inline-block;
            height: 100%;
            vertical-align: middle;
        }

        .hover_bkgr_fricc > div {
            background-color: #fff;
            box-shadow: 10px 10px 60px #555;
            display: inline-block;
            height: auto;
            max-width: 551px;
            min-height: 100px;
            vertical-align: middle;
            width: 60%;
            position: relative;
            border-radius: 8px;
            padding: 15px 5%;
        }

    .popupCloseButton {
        background-color: #fff;
        border: 3px solid #999;
        border-radius: 50px;
        cursor: pointer;
        display: inline-block;
        font-family: arial;
        font-weight: bold;
        position: absolute;
        top: -20px;
        right: -20px;
        font-size: 25px;
        line-height: 30px;
        width: 30px;
        height: 30px;
        text-align: center;
    }

        .popupCloseButton:hover {
            background-color: #ccc;
        }

    .trigger_popup_fricc {
        cursor: pointer;
        display: inline-block;
    }
    /* Popup box BEGIN */

    /*Media Queries*/
    @@media only screen and (min-device-width : 320px) and (max-device-width : 480px) {

        .container-md .btn-primary {
            margin-bottom: 15px !important;
            padding-bottom: 15px !important;
            
        }

        .table_wrapper {
            height: 400px;
            width: 100%;
            padding: 10px;
            margin-left: auto;
            margin-right: auto;
            font-size: 10px;
        }

        h2 {
            font-size: 16px;
            margin-bottom: 5px;
            margin-top: 5px;
            padding-bottom: 5px;
        }

    }
    @@media only screen and (min-device-width : 768px) and (max-device-width : 1024px) {

        .container-md .btn-primary {
            margin-bottom: 30px !important;
            padding-bottom: 30px !important;
        }

        .table_wrapper {
            height: 500px;
            width: 100%;
            padding: 15px;
            margin-left: auto;
            margin-right: auto;
            font-size: 14px;
        }

        h2 {
            font-size: 22px;
            margin-bottom: 10px;
            margin-top: 10px;
            padding-bottom: 10px;
        }
    }


    @@media only screen and (min-device-width : 1025px) and (max-device-width : 2048px) {

        .container-md .btn-primary {
            margin-bottom: 30px !important;
            padding-bottom: 30px !important;
        }

        .table_wrapper {
            height: 500px;
            width: 100%;
            padding: 30px;
            margin-left: auto;
            margin-right: auto;
            font-size: 20px;
        }

        h2 {
            font-size: 30px;
            margin-bottom: 15px;
            margin-top: 15px;
            padding-bottom: 15px;
        }
    }


</style>

<script>
    function UserAction() {
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                document.getElementById("output").innerHTML = this.responseText;
            }
        };
        xhttp.open("GET", "http://localhost:5000/api/currenttime", true);
        xhttp.setRequestHeader("Content-type", "application/json");
        xhttp.send();

    }

    function UserActionTable() {
        var xhttp = new XMLHttpRequest();
        $("#tabledynamic").append($("#dynamicTableBody"));
        xhttp.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                var Data = JSON.parse(this.responseText);
                var tr = document.createElement('TR');
                $("#dynamicTableBody").append(tr);
                for (var j = 0; j < 4; j++) {
                    var td = document.createElement('TD');
                    td.appendChild(document.createTextNode(Data[j]));
                    tr.appendChild(td);
                }
            }
        }
        xhttp.open("GET", "http://localhost:5000/api/currenttime", true);
        xhttp.setRequestHeader("Content-type", "application/json");
        xhttp.send();
    }

    function PageLoadEntireTable() {
        var xhttp = new XMLHttpRequest();
        $("#PageDynamicTableBody").html('');
        xhttp.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                var Data = JSON.parse(this.responseText);
                for (var i = 0; i < Data.length; i++) {
                    $("#PageDynamicTableBody").append('<tr><td>' + (Data[i].currentTimeQueryId) + '</td><td> ' + (Data[i].time) + '</td><td>' + (Data[i].clientIp) + '</td><td>' + (Data[i].utcTime) + '</td ></tr>');
                }
            }
        }
        xhttp.open("GET", "http://localhost:5000/api/currenttimetable", true);
        xhttp.setRequestHeader("Content-type", "application/json");
        xhttp.send();
    }

    function UserTruncateTable() {
        var xhttp = new XMLHttpRequest();

        xhttp.open("POST", "http://localhost:5000/api/currenttimetabletruncate", true);
        xhttp.setRequestHeader("Content-type", "application/json");
        xhttp.send();
    }

    $(document).ready(function () {
        PageLoadEntireTable();
        $('button').attr('disabled', false);
        $(".trigger_popup_fricc").click(function () {
            $('.hover_bkgr_fricc').show();
        });
        $('.hover_bkgr_fricc').click(function () {
            $('.hover_bkgr_fricc').hide();
        });
        $('.popupCloseButton').click(function () {
            $('.hover_bkgr_fricc').hide();
        });
    });



</script>

<div class="container-md info">

    <h2 class="header">AWH Clockwork Project @ViewData["Version"] on @ViewData["Runtime"]!</h2>
    <p id="output"></p>
</div>

<div class="hover_bkgr_fricc">
    <span class="helper"></span>
    <div>
        <div class="popupCloseButton">&times;</div>
        <div style="padding:10px">
            You're About To Truncate Table! Are You Sure?'
        </div>
        <div>
            <button type="submit" onclick="UserTruncateTable()" class="btn btn-primary" disabled style="height:40px;width:200px" align="right">
                OK
            </button>
        </div>
    </div>
</div>

<div class="align-content-lg-around" style="margin:50px">


    <div class="container-md" align="center" style="padding-bottom:50px">
        <button type="submit" onclick="UserActionTable(); PageLoadEntireTable()" class="btn btn-primary" disabled style="height:40px;width:200px" >
            Add Table Record
        </button>
        <button type="submit" onclick="UserAction()" class="btn btn-primary" disabled style="height:40px;width:200px" >
            Get the time
        </button>
        <button type="submit" onclick="PageLoadEntireTable()" class="btn btn-primary" disabled style="height:40px;width:200px" >
            Load Table
        </button>
        <button class="btn btn-primary trigger_popup_fricc" disabled style="height:40px;width:200px" >
            Truncate Table
        </button>
    </div>




    <div class="container-md table_wrapper">
        <!--Table-->
        <div id="myDynamicTable">
            <h2 align="center">ClockWork Responsive Dynamic Table</h2>
            <div class="table-responsive-md">
                <table class="table table-striped table-dark table-bordered" id="tabledynamic">
                    <!--Table head-->
                    <thead>
                        <tr>
                            <th>UTC Time</th>
                            <th>Client Ip</th>
                            <th>Time</th>
                            <th>Message</th>
                        </tr>
                    </thead>
                    <!--Table head-->
                    <!--Table body-->
                    <tbody id="dynamicTableBody">
                    </tbody>
                    <!--Table body-->


                </table>
                <!--Table-->
            </div>
        </div>
    </div>
    <div>
        <div id="PageDynamicTable" class="table_wrapper">
            <h2 align="center">ClockWork Responsive Fetch Table</h2>
            <div class="table-responsive-md">
                <table class="table table-striped table-dark table-bordered">
                    <!--Table head-->
                    <thead>
                        <tr>
                            <th>Record #</th>
                            <th>UTC Time</th>
                            <th>Client Ip</th>
                            <th>Time</th>
                        </tr>
                    </thead>
                    <!--Table head-->
                    <!--Table body-->
                    <tbody id="PageDynamicTableBody">
                    </tbody>
                    <!--Table body-->


                </table>
                <!--Table-->
            </div>
        </div>
    </div>
</div>
